<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Flask app</title>
  <link rel="stylesheet" href="/static/css/main.css">
</head>

<body>
  <main>
    <aside>
      <div class="capsule" hidden>
        <h3>Errors</h3>
        <p id="errorDisplay"></p>
      </div>
      <form id="theform" action="uploader" method="POST" enctype="multipart/form-data">
        <div class="capsule">
          <h3 class=noselect onclick="hide(this)">Background Video Settings</h3>
          <table id=tableVisual hidden>
            <tr>
              <td>
                <label for="visualType">Select background type</label>
              </td>
              <td>
                <table>
                  <tr>
                    <td>
                      <label for="videoType">Video</label>
                      <input type="radio" name="visualType" id="videoType" value="video" onchange="videoTypeChange('video')" required/>
                    </td>
                    <td>
                      <label for="imageType">Image</label>
                      <input type="radio" name="visualType" id="imageType" value="image" onchange="videoTypeChange('image')"/>
                    </td>
                    <td>
                      <label for="solidType">Solid Colour</label>
                      <input type="radio" name="visualType" id="solidType" value="solid" onchange="videoTypeChange('solid')"/>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            <tr class="all video image" hidden>
              <td>
                <label for="videoUpload" class="all video">Upload video</label>
                <label for="videoUpload" class="all image">Upload image</label>
              </td>
              <td>
                <input type="file" id="videoUpload" accept="video/*,image/*" onchange="videoChange()"/>
              </td>
            </tr>
            <tr class="all solid" hidden>
              <td>
                <label for="background_colour">Background colour</label>
              </td>
              <td>
                <input type="color" name="background_colour" id="background_colour" value="#000000" required>
              </td>
            </tr>
            <tr class="all video" hidden>
              <td>
                <label for="video_start">Time to start the video</label>
              </td>
              <td>
                <input type="number" id="video_start" name="video_start" min="0" value="0" max="100000" required/>
              </td>
            </tr>
            <tr class="all video" hidden>
              <td>
                <label for="video_end">Time to end the video (0 means leave untill the end)</label>
              </td>
              <td>
                <input type="number" id="video_end" name="video_end" min="0" value="0" max="100000" required/>
              </td>
            </tr>
            <tr class="all video" hidden>
              <td>
                <label for="video_speed">Video playback speed</label>
              </td>
              <td>
                <input type="number" id="video_speed" name="video_speed" min="0.01" value="1" step="0.01" max="10" required/>
              </td>
            </tr>
            <tr class="all video image solid" hidden>
              <td>
                <label for="video_fade_in">Number of seconds for fade at the start</label>
              </td>
              <td>
                <input type="number" id="video_fade_in" name="video_fade_in" min="0" value="0" required/>
              </td>
            </tr>
            <tr class="all video image solid" hidden>
              <td>
                <label for="video_fade_out">Number of seconds for fade at the end</label>
              </td>
              <td>
                <input type="number" id="video_fade_out" name="video_fade_out" min="0" value="0" required/>
              </td>
            </tr>
            <tr class="all video" hidden>
              <td>
                <label for=crop_video>Crop Video to match audio length?</label>
              </td>
              <td>
                <input type="checkbox" id="crop_video" name="crop_video" checked/>
              </td>
            </tr>
          </table>
        </div>


        <div class="capsule">
          <h3 class=noselect onclick="hide(this)">Audio Settings</h3>
          <table id=tableAudio hidden>
            <tr>
              <td>
                <label for="audioSource">Select audio source</label>
              </td>
              <td>
                <table>
                  <tr>
                    <td>
                      <label for="videoSource">Video</label>
                      <input type="radio" name="audioSource" id="videoSource" value="video" onchange="audioSourceChange('video')" required/>
                    </td>
                    <td>
                      <label for="audioSource">Audio</label>
                      <input type="radio" name="audioSource" id="audioSource" value="audio" onchange="audioSourceChange('audio')"/>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            <tr class="advanced" hidden>
              <td>
                <label for="advanced_options">Show seperate audio options</label>
              </td>
              <td>
                <input type="checkbox" id="advanced_options" onchange="advancedOption()">
              </td>
            </tr>
            <tr class="all audio" hidden>
              <td>
                <label for="audioUpload">Upload Audio (Optional)</label>
              </td>
              <td>
                <input type="file" id="audioUpload" accept="audio/*,video/*" onchange="audioChange()"/>
              </td>
            </tr>
            <tr class="all audio" hidden>
              <td>
                <label for="audio_start">Time to start the audio</label>
              </td>
              <td>
                <input type="number" id="audio_start" name="audio_start" min="0" value="0" step="0.01" max="100000" class="copy" required/>
              </td>
            </tr>
            <tr class="all audio" hidden>
              <td>
                <label for="audio_end">Time to end the audio</label>
              </td>
              <td>
                <input type="number" id="audio_end" name="audio_end" min="0" value="0" step="0.01" max="100000" class="copy" required/>
              </td>
            </tr>
            <tr class="all audio" hidden>
              <td>
                <label for="audio_speed">Audio playback speed</label>
              </td>
              <td>
                <input type="number" id="audio_speed" name="audio_speed" min="0.5" value="1" step="0.01" max="2"
                class="copy" required/>
              </td>
            </tr>
            <tr class="all audio" hidden>
              <td>
                <label for=crop_audio>Crop Audio to match video length?</label>
              </td>
              <td>
                <input type="checkbox" id="crop_audio" name="crop_audio" />
              </td>
            </tr>
            <tr class="all audio" hidden>
              <td>
                <label for="audio_fade_in">Fade audio in (seconds)</label>
              </td>
              <td>
                <input type="number" id="audio_fade_in" name="audio_fade_in" min="0" value="0" class="copy" required/>
              </td>
            </tr>
            <tr class="all audio" hidden>
              <td>
                <label for="audio_fade_out">Fade audio out (seconds)</label>
              </td>
              <td>
                <input type="number" id="audio_fade_out" name="audio_fade_out" min="0" value="0" class="copy" required/>
              </td>
            </tr>
            <tr id="row_fill_time" hidden>
              <td>
                Caclculate speed to match video time to audio time
              </td>
              <td>
                <button type="button" onclick="fillTime()">Go</button>
              </td>
            </tr>

          </table>
        </div>

        <div class="capsule">
          <h3 class=noselect onclick="hide(this)">Text Settings</h3>
          <table id=tableText hidden>
            <tr>
              <td>
                <label for="font_size">Font size</label>
              </td>
              <td>
                <input type="number" id="font_size" name="font_size" min="1" value="100" max="1000" step="1" required/>
              </td>
            </tr>
            <tr>
              <td>
                <label for="textColour">Choose the colour of the text</label>
              </td>
              <td>
                <input id="textColour" name="textColour" type="color" value="#ffffff" required/>
              </td>
            </tr>
            <tr>
              <td>
                <label for="visibleShadow">View a shadow behind the text?</label>
              </td>
              <td>
                <input type="checkbox" id="visibleShadow" name="visibleShadow" onchange="shadowChange()" checked/>
              </td>
            </tr>
            <tr class="shadow_properties">
              <td>
                <label for="shadowColour">Choose the colour of the shadow</label>
              </td>
              <td>
                <input id="shadowColour" name="shadowColour" type="color" value="#000000" required/>
              </td>
            </tr>
            <tr class="shadow_properties">
              <td>
                <label for="shadowX">Shadow offset</label>
              </td>
              <td>
                <input type="number" id="shadow_offset_x" name="shadow_offset_x" value="5" step="1" min="-2000" max="2000" required>
                , 
                <input type="number" id="shadow_offset_y" name="shadow_offset_y" value="5" step="1" min="-2000" max="2000" required>
              </td>
            </tr>

            <tr>
              <td>
                <label for="text_position">Text position</label>
              </td>
              <td>
                <table>
                  <tr>
                    <td>
                      <input type="radio" name="text_position" id="text_tl" value="tl">
                    </td>
                    <td>
                      <input type="radio" name="text_position" id="text_tm" value="tm">
                    </td>
                    <td>
                      <input type="radio" name="text_position" id="text_tr" value="tr">
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <input type="radio" name="text_position" id="text_ml" value="ml">
                    </td>
                    <td>
                      <input type="radio" name="text_position" id="text_mm" value="mm">
                    </td>
                    <td>
                      <input type="radio" name="text_position" id="text_mr" value="mr">
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <input type="radio" name="text_position" id="text_bl" value="bl">
                    </td>
                    <td>
                      <input type="radio" name="text_position" id="text_bm" value="bm">
                    </td>
                    <td>
                      <input type="radio" name="text_position" id="text_br" value="br">
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            <tr>
              <td>
                <label for="text_width">Max text width</label>
              </td>
              <td>
                <input type="number" id="text_width" name="text_width" min="0" value="90" max="100" step="1" required/> %
              </td>
            </tr>

          </table>
        </div>
        <div class="capsule" id=tab hidden>
          <h3 class=noselect onclick="hide(this, true)">Uploaded Video</h3>
          <div padding=0>
            <video id="video1" width=100% class="all video" controls>
              Please upload a video
            </video>
            <img id="image1" width=100% class="all image" alt="Unable to show image">
          </div>
        </div>
        <div class="capsule" id=tab hidden>
          <h3 class=noselect onclick="hide(this, true)">Uploaded Audio</h3>
          <div>
            <audio id="audio1" controls>
              Please upload an mp3
            </audio>
          </div>
        </div>
        <div class="capsule">
          <h3 class=noselect onclick="hide(this)">Preview frame</h3>
          <div id=tab hidden>
            <img id="previewImg" width="100%" src="" hidden /><br />
            <button type="button" onclick="previewFrame()">Preview</button><br />
          </div>
        </div>
        <h1 id="csvHeading" hidden>CSV to copy</h1>
        <textarea type="text" id="csv" name="csvFile" value="" readonly hidden>
          </textarea>
        <div class="capsule">
          <h3 id="submitbutton" class="noselect" onclick="submitForm()">Submit</h3>
        </div>

        <input type="text" id="videoExt" name="videoExt" readonly hidden>
        <input type="text" id="audioExt" name="audioExt" readonly hidden>
        <input type="text" id="uuid" name="uuid" readonly hidden>        
      </form>
    </aside>

    <section hidden>
      <article>
        <h2>Timing</h2>
        <table id="table1"></table>
      </article>
    </section>
    <section>
      <article>
        <h2>Lyrics</h2>
        <label for="verses"> Show a full verse at a time </label>
        <input type="checkbox" id="verses" onchange="updated()"/>
        <br>
        <textarea id="lyricsArea" style="overflow: hidden" font-family="Arial" width="253px" wrap="off" onkeyup="textAreaAdjust(this)"
          placeholder="Insert the lyrics of the song here" onchange="updated()"></textarea>
      </article>
    </section>
  </main>
</body>

<script src="/static/js/video.js"></script>
</html>